{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When your Infinity Connect client is registered, you can receive incoming video calls."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"While you can use the Registration API in your macOS client apps, it is not recommended to use it on iOS, where the app could be sent to the background and eventually terminated by the system. On iOS use the "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/pushkit\/responding_to_voip_notifications_from_pushkit"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/callkit"},{"type":"text","text":" frameworks to receive incoming Voice-over-IP (VoIP) push notifications and display the system call interface to the user."}]},{"anchor":"Implementation","level":2,"type":"heading","text":"Implementation"},{"anchor":"Resolve-Conferencing-Node","level":3,"type":"heading","text":"Resolve Conferencing Node"},{"type":"codeListing","syntax":"swift","code":["import PexipInfinityClient","","\/\/ 1. Create an instance of NodeResolver and InfinityService","let apiClientFactory = InfinityClientFactory(logger: DefaultLogger.infinityClient)","let nodeResolver = apiClientFactory.nodeResolver(dnssec: false)","let infinityService = apiClientFactory.infinityService()","","\/\/ 2. Create a device alias (force unwrapping is for example only)","let deviceAlias = DeviceAlias(uri: \"alias@example.com\")!","","\/\/ 3. Resolve the address of the first available Conferencing Node for the provided host","let node = try await infinityService.resolveNodeURL(","    forHost: deviceAlias.host,","    using: nodeResolver",")"]},{"anchor":"Request-a-registration-token","level":3,"type":"heading","text":"Request a registration token"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You need to know your username and password in order to request a registration token."}]},{"type":"codeListing","syntax":"swift","code":["import PexipInfinityClient","","let registrationToken = try await infinityService.node(url: node)","    .registration(deviceAlias: deviceAlias)","    .requestToken(username: username, password: password)"]},{"anchor":"Create-a-registration","level":3,"type":"heading","text":"Create a registration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When requesting a token you will get a response token. The response token is used to"},{"type":"text","text":" "},{"type":"text","text":"create a "},{"type":"codeVoice","code":"Registration"},{"type":"text","text":" along with the node from the previous steps and the device alias."}]},{"type":"codeListing","syntax":"swift","code":["import PexipInfinityClient","","\/\/ Registration object starts refreshing the token when created.","let registration = factory.registration(","    node: node,","    deviceAlias: deviceAlias,","    token: registrationToken",")"]},{"anchor":"Handle-registration-events","level":3,"type":"heading","text":"Handle registration events"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Subscribe to registration events in order to receive incoming calls."}]},{"type":"codeListing","syntax":"swift","code":["registration.receiveEvents()","","registration.eventPublisher","    .sink { event in","        switch event {","        case .incoming(let incomingCallEvent):","            \/\/ Process incoming call event.","            \/\/ Display the call interface to the user, etc.","            process(incomingCallEvent)","        case .incomingCancelled(let event):","            \/\/ Dismiss the previously presented call interface, etc.","            cancel(event)","        case .failure(let event):","            debugPrint(event.error)","        }","    }","    .store(in: &cancellables)"]},{"anchor":"Accept-incoming-calls","level":3,"type":"heading","text":"Accept incoming calls"},{"type":"codeListing","syntax":"swift","code":["\/\/ 1. Create the name by which this participant should be known","let displayName = \"Guest\"","","\/\/ 2. Create a conference alias (force unwrapping is for example only)","let alias = ConferenceAlias(uri: incomingCallEvent.conferenceAlias)!","","\/\/ 3. Resolve the address of the first available Conferencing Node for the provided host","let node = try await infinityService.resolveNodeURL(","    forHost: alias.host,","    using: nodeResolver",")","","\/\/ 4. Request a token from the Pexip Conferencing Node","do {","    let fields = ConferenceTokenRequestFields(displayName: displayName)","    let conferenceToken = try await infinityService.node(url: nodeURL)","        .conference(alias: alias)","        .requestToken(fields: fields, incomingToken: incomingCallEvent.token)","} catch {","    debugPrint(error)","} "]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The response token can be used to create a Conference object, set up media connection, etc."},{"type":"text","text":" "},{"type":"text","text":"Check "},{"type":"reference","isActive":true,"identifier":"doc:\/\/PexipSwiftSDK\/documentation\/PexipSwiftSDK\/GettingStarted"},{"type":"text","text":" to learn how to join the conference."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/pexipswiftsdk\/registration"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/PexipSwiftSDK\/documentation\/PexipSwiftSDK\/Registration","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Register your device to receive calls with "},{"type":"strong","inlineContent":[{"type":"text","text":"Pexip Swift SDK"}]},{"type":"text","text":"."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Registration","role":"article","modules":[{"name":"Pexip Swift SDK"}]},"hierarchy":{"paths":[["doc:\/\/PexipSwiftSDK\/documentation\/PexipSwiftSDK"]]},"references":{"https://developer.apple.com/documentation/callkit":{"title":"CallKit","titleInlineContent":[{"type":"text","text":"CallKit"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/callkit","url":"https:\/\/developer.apple.com\/documentation\/callkit"},"https://developer.apple.com/documentation/pushkit/responding_to_voip_notifications_from_pushkit":{"title":"PushKit","titleInlineContent":[{"type":"text","text":"PushKit"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/pushkit\/responding_to_voip_notifications_from_pushkit","url":"https:\/\/developer.apple.com\/documentation\/pushkit\/responding_to_voip_notifications_from_pushkit"},"doc://PexipSwiftSDK/documentation/PexipSwiftSDK":{"role":"collection","title":"Pexip Swift SDK","abstract":[],"identifier":"doc:\/\/PexipSwiftSDK\/documentation\/PexipSwiftSDK","kind":"symbol","type":"topic","url":"\/documentation\/pexipswiftsdk"},"doc://PexipSwiftSDK/documentation/PexipSwiftSDK/GettingStarted":{"role":"article","title":"Getting Started with Pexip Swift SDK","abstract":[{"type":"text","text":"Learn how to initiate or connect to conferences hosted on the Pexip Infinity platform."}],"identifier":"doc:\/\/PexipSwiftSDK\/documentation\/PexipSwiftSDK\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/pexipswiftsdk\/gettingstarted"}}}